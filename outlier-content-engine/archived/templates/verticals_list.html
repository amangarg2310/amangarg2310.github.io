{% extends "base.html" %}
{% block title %}Categories{% endblock %}
{% block page_title %}Categories{% endblock %}
{% block page_subtitle %}Manage your brand tracking categories{% endblock %}

{% block content %}

<!-- Header Action -->
<div class="flex" style="justify-content:space-between;align-items:center;margin-bottom:24px">
    <div></div>
    <a href="{{ url_for('vertical_create_page') }}" class="btn btn-primary">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        New Category
    </a>
</div>

{% if verticals %}
    {% for vertical in verticals %}
    <div class="card" style="margin-bottom:20px">
        <div class="card-header">
            <div>
                <div class="card-title">{{ vertical.name }}</div>
                <div class="card-subtitle">
                    {% if vertical.description %}
                        {{ vertical.description }} &middot;
                    {% endif %}
                    {{ vertical.brand_count }} brand{% if vertical.brand_count != 1 %}s{% endif %}
                </div>
            </div>
            <div class="flex gap-8">
                <form method="POST" action="{{ url_for('run_engine') }}" style="display:inline">
                    <input type="hidden" name="vertical_name" value="{{ vertical.name }}">
                    <button type="submit" class="btn btn-sm btn-primary">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        Analyze
                    </button>
                </form>
                <a href="{{ url_for('vertical_edit_page', name=vertical.name) }}" class="btn btn-sm btn-outline">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                    Edit
                </a>
            </div>
        </div>

        {% if vertical.brands %}
        <div class="tag-list" style="padding:16px;padding-top:0">
            {% for brand in vertical.brands[:10] %}
            <span class="tag" style="background:var(--bg);border:1px solid var(--border)">
                {% if brand.brand_name %}
                    <strong>{{ brand.brand_name }}</strong>
                {% endif %}
                {% if brand.instagram_handle %}
                    <span style="background:var(--bg-tertiary);padding:2px 6px;border-radius:3px;font-size:10px;margin:0 4px">IG</span>
                    <span style="color:var(--text-secondary)">@{{ brand.instagram_handle }}</span>
                {% endif %}
                {% if brand.tiktok_handle %}
                    <span style="background:var(--bg-tertiary);padding:2px 6px;border-radius:3px;font-size:10px;margin:0 4px">TT</span>
                    <span style="color:var(--text-secondary)">@{{ brand.tiktok_handle }}</span>
                {% endif %}
            </span>
            {% endfor %}
            {% if vertical.brand_count > 10 %}
            <span class="tag" style="background:var(--bg-secondary);border:1px dashed var(--border);color:var(--text-dim)">
                + {{ vertical.brand_count - 10 }} more
            </span>
            {% endif %}
        </div>
        {% else %}
        <div style="padding:16px;padding-top:0;color:var(--text-dim);font-size:13px">
            No brands added yet
        </div>
        {% endif %}
    </div>
    {% endfor %}

{% else %}
    <!-- Empty State -->
    <div class="card" style="text-align:center;padding:60px 20px">
        <div style="font-size:48px;margin-bottom:16px">ðŸ“‚</div>
        <h3 style="font-size:20px;margin-bottom:12px;color:var(--text)">No Categories Yet</h3>
        <p style="font-size:14px;color:var(--text-secondary);margin-bottom:24px;line-height:1.6">
            Create your first category to start tracking brands.<br>
            For example: "Streetwear", "Gaming Brands", "DTC Beauty"
        </p>
        <a href="{{ url_for('vertical_create_page') }}" class="btn btn-primary">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Create First Category
        </a>
    </div>
{% endif %}

{% endblock %}
